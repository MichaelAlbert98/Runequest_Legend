<div class="wrapper">
    <div class="column-1of1">
        <div class='column-1n2of3'>
            <div class="section">
                <table class="header">
                    <tr>
                        <td class="info-label">Name: </td>
                        <td><input type="text" class="full" name="attr_name"></td>
                        <td class="info-label">Species: </td>
                        <td><input type="text" class="full" name="attr_species"></td>
                        <td class="info-label">Homeland: </td>
                        <td><input type="text" class="full" name="attr_homeland"></td>
                    </tr>
                </table>
                <table class="header">
                    <tr>
                        <td class="info-label">Culture: </td>
                        <td><input type="text" class="full" name="attr_culture"></td>
                        <td class="info-label">Profession: </td>
                        <td><input type="text" class="full" name="attr_profession"></td>
                        <td class="info-label">Handedness: </td>
                        <td><input type="text" class="full" name="attr_handedness"></td>
                    </tr>
                </table>
                <table class="full">
                    <tr>
                        <td class="info-label">Gender: </td>
                        <td><input type="text" class="full" name="attr_gender"></td>
                        <td class="info-label">Age: </td>
                        <td><input type="text" class="info-number" name="attr_age"></td>
                        <td class="info-label">Weight: </td>
                        <td><input type="text" class="info-number" name="attr_weight"></td>
                        <td class="info-label">Height: </td>
                        <td><input type="text" class="info-number" name="attr_height"></td>
                        <td class="info-label">Hero Points: </td>
                        <td><input type="text" class="info-number" name="attr_hero_points"/></td>
                        <td class="info-label">XP Rolls: </td>
                        <td><input type="text" class="info-number" name="attr_xp_rolls"></td>
                    </tr>
                </table>
            </div>
        </div>
        <div class='column-3of3'>
            <img src="https://raw.githubusercontent.com/MichaelAlbert98/roll20-character-sheets/Runequest_Legend/Runequest_Legend/Legend_front.jpg">
            <span style="display: block; margin-bottom: 2px;"></span>
        </div>
    </div>

    <div>
        <input type="radio" class="tab vitals-tab" name="attr_tab" value="vitals" checked="checked"><span class="tab vitals-tab">Vitals</span>
        <input type="radio" class="tab combat-tab" name="attr_tab" value="combat"><span class="tab combat-tab">Combat</span>
        <input type="radio" class="tab skills-tab" name="attr_tab" value="skills"><span class="tab skills-tab">Skills</span>
        <input type="radio" class="tab equipment-tab" name="attr_tab" value="equipment"><span class="tab equipment-tab">Equipment/Wealth</span>
        <input type="radio" class="tab notes-tab" name="attr_tab" value="notes"><span class="tab notes-tab">Cults/Effects/Notes</span>
        <span style="display: block; margin: 3px;"></span>
        <input type="radio" class="tab common_magic-tab" name="attr_tab" value="common_magic"><span class="tab common_magic-tab">Common Magic</span>
        <input type="radio" class="tab divine_magic-tab" name="attr_tab" value="divine_magic"><span class="tab divine_magic-tab">Divine Magic</span>
        <input type="radio" class="tab sorcery-tab" name="attr_tab" value="sorcery"><span class="tab sorcery-tab">Sorcery</span>
        <span style="display: block; margin-bottom: 1%;"></span>

        <div class="page vitals-page">
            <div class="column-1of1">
                <div class="section">
                    <h3>Characteristics & Traits</h3>
                    <div class="characteristic-column">
                        <input type="hidden" name="attr_hidden_str" value="0" />
                        <input type="hidden" name="attr_hidden_int" value="0" />
                        <input type="hidden" name="attr_hidden_con" value="0" />
                        <input type="hidden" name="attr_hidden_pow" value="0" />
                        <input type="hidden" name="attr_hidden_siz" value="0" />
                        <input type="hidden" name="attr_hidden_cha" value="0" />
                        <input type="hidden" name="attr_hidden_dex" value="0" />
                        <table class="char">
                            <tr>
                                <td></td>
                                <td><h5>Std</h5></td>
                                <td><h5>+</h5></td>
                                <td><h5>Temp</h5></td>
                                <td><h5>=</h5></td>
                                <td><h5>Total</h5></td>
                            </tr>
                            <tr>
                                <td class="char-label">STR: </td>
                                <td><input type="number" class="value" name="attr_str_std" value="10"></td>
                                <td>+</td>
                                <td><input type="number" class="value" name="attr_str_temp" value="0"></td>
                                <td>=</td>
                                <td><input type="number" class="total" name="attr_str" value="@{hidden_str}"disabled></td>
                            </tr>
                            <tr>
                                <td class="char-label">INT: </td>
                                <td><input type="number" class="value" name="attr_int_std" value="10"></td>
                                <td>+</td>
                                <td><input type="number" class="value" name="attr_int_temp" value="0"></td>
                                <td>=</td>
                                <td><input type="number" class="total" name="attr_int" value="@{hidden_int}"disabled></td>
                            </tr>
                        </table>
                    </div>
                    <div class="characteristic-column">
                        <table class="char">
                            <tr>
                                <td></td>
                                <td><h5>Std</h5></td>
                                <td><h5>+</h5></td>
                                <td><h5>Temp</h5></td>
                                <td><h5>=</h5></td>
                                <td><h5>Total</h5></td>
                            </tr>
                            <tr>
                                <td class="char-label">CON: </td>
                                <td><input type="number" class="value" name="attr_con_std" value="10"></td>
                                <td>+</td>
                                <td><input type="number" class="value" name="attr_con_temp" value="0"></td>
                                <td>=</td>
                                <td><input type="number" class="total" name="attr_con" value="@{hidden_con}"disabled></td>
                            </tr>
                            <tr>
                                <td class="char-label">POW: </td>
                                <td><input type="number" class="value" name="attr_pow_std" value="10"></td>
                                <td>+</td>
                                <td><input type="number" class="value" name="attr_pow_temp" value="0"></td>
                                <td>=</td>
                                <td><input type="number" class="total" name="attr_pow" value="@{hidden_pow}"disabled></td>
                            </tr>
                        </table>
                    </div>
                    <div class="characteristic-column">
                        <table class="char">
                            <tr>
                                <td></td>
                                <td><h5>Std</h5></td>
                                <td><h5>+</h5></td>
                                <td><h5>Temp</h5></td>
                                <td><h5>=</h5></td>
                                <td><h5>Total</h5></td>
                            </tr>
                            <tr>
                                <td class="char-label">SIZ: </td>
                                <td><input type="number" class="value" name="attr_siz_std" value="10"></td>
                                <td>+</td>
                                <td><input type="number" class="value" name="attr_siz_temp" value="0"></td>
                                <td>=</td>
                                <td><input type="number" class="total" name="attr_siz" value="@{hidden_siz}"disabled></td>
                            </tr>
                            <tr>
                                <td class="char-label">CHA: </td>
                                <td><input type="number" class="value" name="attr_cha_std" value="10"></td>
                                <td>+</td>
                                <td><input type="number" class="value" name="attr_cha_temp" value="0"></td>
                                <td>=</td>
                                <td><input type="number" class="total" name="attr_cha" value="@{hidden_cha}"disabled></td>
                            </tr>
                        </table>
                    </div>
                    <div class="characteristic-column">
                        <table class="char">
                            <tr>
                                <td></td>
                                <td><h5>Std</h5></td>
                                <td><h5>+</h5></td>
                                <td><h5>Temp</h5></td>
                                <td><h5>=</h5></td>
                                <td><h5>Total</h5></td>
                            </tr>
                            <tr>
                                <td class="char-label">DEX: </td>
                                <td><input type="number" class="value" name="attr_dex_std" value="10"></td>
                                <td>+</td>
                                <td><input type="number" class="value" name="attr_dex_temp" value="0"></td>
                                <td>=</td>
                                <td><input type="number" class="total" name="attr_dex" value="@{hidden_dex}"disabled></td>
                            </tr>
                            <tr>
                                <td class="char-label">INIT: </td>
                                <td><button type='roll' name="roll_check" value="&{template:runequest-init} {{name=Initiative}} {{rolled=[[ 1d10 + @{strike_rank} &{tracker} ]]}}"></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                            </tr>
                        </table>
                    </div>
                    <br style="clear:both;"/>
                    <table class="full">
                        <tr>
                            <td style="white-space: nowrap"><h5>Traits: </h5></td>
                            <td style="width: 100%; text-align: right;"><input type="text" class="full" name="attr_traits" /></td>
                        </tr>
                    </table>
                </div>
            </div>
            <div class="column-1n2of3">
                <div class="section">
                    <table class="full">
                        <tr>
                            <td style="white-space: nowrap"><h3>Hit Locations & Armor</h3></td>
                            <td style="width: 100%; text-align: right;"><h5 style="display: inline">Armor Penalty: </h5><input type="number" class="value" name="attr_armor_penalty" value="-ceil((@{hitloc1_apmax}+@{hitloc2_apmax}+@{hitloc3_apmax}+@{hitloc4_apmax}+@{hitloc5_apmax}+@{hitloc6_apmax}+@{hitloc7_apmax})/5)" disabled/></td>
                        </tr>
                    </table>
                    <table class="full">
                        <tr class="head">
                            <td class="hit_locations_roll"><h5>1d20</h5></td>
                            <td><h5>Location</h5></td>
                            <td><h5>Armor Worn</h5></td>
                            <td><h5>ENC</h5></td>
                            <td colspan="3"><h5>AP</h5></td>
                            <td colspan="3"><h5>HP</h5></td>
                        </tr>
                        <tr>
                            <td><input class="value_full" type="text" name="attr_hitloc1_roll" value="1-3"/></td>
                            <td><input class="full" type="text" name="attr_hitloc1" value="Right Leg"/></td>
                            <td><input class="full" type="text" name="attr_hitloc1_armor"/></td>
                            <td><input class="value" type="number" name="attr_hitloc1_enc" value="0"/></td>
                            <td><input class="value" type="text" name="attr_hitloc1_ap"/></td>
                            <td>/</td>
                            <td><input class="value" type="text" name="attr_hitloc1_apmax"/>
                            <td><input class="value" type="text" name="attr_hitloc1_hp"/></td>
                            <td>/</td>
                            <td><input class="value" type="number" name="attr_hitloc1_hp_max" value="ceil((@{hidden_con}+@{hidden_siz})/5)" disabled/></td>
                        </tr>
                        <tr>
                            <td><input class="value_full" type="text" name="attr_hitloc2_roll" value="4-6"/></td>
                            <td><input class="full" type="text" name="attr_hitloc2" value="Left Leg"/></td>
                            <td><input class="full" type="text" name="attr_hitloc2_armor"/></td>
                            <td><input class="value" type="number" name="attr_hitloc2_enc" value="0"/></td>
                            <td><input class="value" type="text" name="attr_hitloc2_ap"/></td>
                            <td>/</td>
                            <td><input class="value" type="text" name="attr_hitloc2_apmax"/>
                            <td><input class="value" type="text" name="attr_hitloc2_hp"/></td>
                            <td>/</td>
                            <td><input class="value" type="number" name="attr_hitloc2_hp_max" value="ceil((@{hidden_con}+@{hidden_siz})/5)" disabled/></td>
                        </tr>
                        <tr>
                            <td><input class="value_full" type="text" name="attr_hitloc3_roll" value="7-9"/></td>
                            <td><input class="full" type="text" name="attr_hitloc3" value="Abdomen"/></td>
                            <td><input class="full" type="text" name="attr_hitloc3_armor"/></td>
                            <td><input class="value" type="number" name="attr_hitloc3_enc" value="0"/></td>
                            <td><input class="value" type="text" name="attr_hitloc3_ap"/></td>
                            <td>/</td>
                            <td><input class="value" type="text" name="attr_hitloc3_apmax"/>
                            <td><input class="value" type="text" name="attr_hitloc3_hp"/></td>
                            <td>/</td>
                            <td><input class="value" type="number" name="attr_hitloc3_hp_max" value="(ceil((@{hidden_con}+@{hidden_siz})/5)+1)" disabled/></td>
                        </tr>
                        <tr>
                            <td><input class="value_full" type="text" name="attr_hitloc4_roll" value="10-12"/></td>
                            <td><input class="full" type="text" name="attr_hitloc4" value="Chest"/></td>
                            <td><input class="full" type="text" name="attr_hitloc4_armor"/></td>
                            <td><input class="value" type="number" name="attr_hitloc4_enc" value="0"/></td>
                            <td><input class="value" type="text" name="attr_hitloc4_ap"/></td>
                            <td>/</td>
                            <td><input class="value" type="text" name="attr_hitloc4_apmax"/>
                            <td><input class="value" type="text" name="attr_hitloc4_hp"/></td>
                            <td>/</td>
                            <td><input class="value" type="number" name="attr_hitloc4_hp_max" value="(ceil((@{hidden_con}+@{hidden_siz})/5)+2)" disabled/></td>
                        </tr>
                        <tr>
                            <td><input class="value_full" type="text" name="attr_hitloc5_roll" value="13-15"/></td>
                            <td><input class="full" type="text" name="attr_hitloc5" value="Right Arm"/></td>
                            <td><input class="full" type="text" name="attr_hitloc5_armor"/></td>
                            <td><input class="value" type="number" name="attr_hitloc5_enc" value="0"/></td>
                            <td><input class="value" type="text" name="attr_hitloc5_ap"/></td>
                            <td>/</td>
                            <td><input class="value" type="text" name="attr_hitloc5_apmax"/>
                            <td><input class="value" type="text" name="attr_hitloc5_hp"/></td>
                            <td>/</td>
                            <td><input class="value" type="number" name="attr_hitloc5_hp_max" value="ceil((@{hidden_con}+@{hidden_siz}-5)/5)" disabled/></td>
                        </tr>
                        <tr>
                            <td><input class="value_full" type="text" name="attr_hitloc6_roll" value="16-18"/></td>
                            <td><input class="full" type="text" name="attr_hitloc6" value="Left Arm"/></td>
                            <td><input class="full" type="text" name="attr_hitloc6_armor"/></td>
                            <td><input class="value" type="number" name="attr_hitloc6_enc" value="0"/></td>
                            <td><input class="value" type="text" name="attr_hitloc6_ap"/></td>
                            <td>/</td>
                            <td><input class="value" type="text" name="attr_hitloc6_apmax"/>
                            <td><input class="value" type="text" name="attr_hitloc6_hp"/></td>
                            <td>/</td>
                            <td><input class="value" type="number" name="attr_hitloc6_hp_max" value="ceil((@{hidden_con}+@{hidden_siz}-5)/5)" disabled/></td>
                        </tr>
                        <tr>
                            <td><input class="value_full" type="text" name="attr_hitloc7_roll" value="19-20"/></td>
                            <td><input class="full" type="text" name="attr_hitloc7" value="Head"/></td>
                            <td><input class="full" type="text" name="attr_hitloc7_armor"/></td>
                            <td><input class="value" type="number" name="attr_hitloc7_enc" value="0"/></td>
                            <td><input class="value" type="text" name="attr_hitloc7_ap"/></td>
                            <td>/</td>
                            <td><input class="value" type="text" name="attr_hitloc7_apmax"/>
                            <td><input class="value" type="text" name="attr_hitloc7_hp"/></td>
                            <td>/</td>
                            <td><input class="value" type="number" name="attr_hitloc7_hp_max" value="ceil((@{hidden_con}+@{hidden_siz})/5)" disabled/></td>
                        </tr>
                        <tr>
                            <td><input class="value_full" type="text" name="attr_hitloc8_roll"/></td>
                            <td><input class="full" type="text" name="attr_hitloc8"/></td>
                            <td><input class="full" type="text" name="attr_hitloc8_armor"/></td>
                            <td><input class="value" type="number" name="attr_hitloc8_enc" value="0"/></td>
                            <td><input class="value" type="text" name="attr_hitloc8_ap"/></td>
                            <td>/</td>
                            <td><input class="value" type="text" name="attr_hitloc8_apmax"/>
                            <td><input class="value" type="text" name="attr_hitloc8_hp"/></td>
                            <td>/</td>
                            <td><input class="value" type="text" name="attr_hitloc8_hp_max"/></td>
                        </tr>
                    </table>
                </div>
            </div>
            <div class="column-3of3">
                <div class="section">
                    <h3>Attributes</h3>
                    <table class="full">
                        <tr class="head">
                            <td><h5>Attribute</h5></td>
                            <td><h5>Std</h5></td>
                            <td><h5>+</h5></td>
                            <td><h5>Temp</h5></td>
                            <td><h5>=</h5></td>
                            <td colspan="3"><h5>Total</h5></td>
                        </tr>
                        <tr>
                            <td class="attribute-label">Combat Actions: </td>
                            <td><input type="number" class="value" name="attr_action_points_std" value="ceil((@{hidden_int}+@{hidden_dex}+@{hidden_fatigue_action_points})/12)" disabled/></td>
                            <td>+</td>
                            <td><input type="text" class="value" name="attr_action_points_temp" value="0"/></td>
                            <td>=</td>
                            <td><input type="text" class="attribute-current" name="attr_action_points"/></td>
                            <td>/</td>
                            <td><input type="number" class="total" name="attr_action_points_max" value="(@{action_points_std}+@{action_points_temp})" disabled/></td>
                        </tr>
                        <tr>
                            <td class="attribute-label">Magic Points: </td>
                            <td><input type="number" class="value" name="attr_magic_points_std" value="@{hidden_pow}" disabled/></td>
                            <td>+</td>
                            <td><input type="text" class="value" name="attr_magic_points_temp" value="0"/></td>
                            <td>=</td>
                            <td><input type="text" class="attribute-current" name="attr_magic_points"/></td>
                            <td>/</td>
                            <td><input type="number" class="total" name="attr_magic_points_max" value="(@{magic_points_std}+@{magic_points_temp}-@{magic_points_dev})" disabled/></td>
                        </tr>
                        <tr>
                            <td class="attribute-label">Move Rate: </td>
                            <td><input type="text" class="value" name="attr_movement_rate_std" value="8" disabled/></td>
                            <td>+</td>
                            <td><input type="text" class="value" name="attr_movement_rate_temp" value="0"/></td>
                            <td>=</td>
                            <td colspan="2"></td>
                            <td><input type="number" class="total" name="attr_movement_rate" value="ceil(((@{movement_rate_std}+@{movement_rate_temp})@{hidden_enc_move_rate_mod})@{hidden_fatigue_movement})" disabled/></td>
                        </tr>
                        <tr>
                            <td class="attribute-label">Strike Rank: </td>
                            <td><input type="number" class="value" name="attr_strike_rank_std" value="ceil((@{hidden_int}+@{hidden_dex})/2)" disabled/></td>
                            <td>+</td>
                            <td><input type="text" class="value" name="attr_strike_rank_temp" value="0"/></td>
                            <td>=</td>
                            <td colspan="2"></td>
                            <td><input type="number" class="total" name="attr_strike_rank" value="ceil((@{hidden_int}+@{hidden_dex})/2)+@{strike_rank_temp}+@{armor_penalty}+@{hidden_fatigue_strike_rank}" disabled/></td>
                        </tr>
                        <tr>
                            <td class="attribute-label">Exp. Mod: </td>
                            <td><input type="number" class="value" name="attr_experience_mod_std" value="(ceil(@{hidden_cha}/6)-2)" disabled/></td>
                            <td>+</td>
                            <td><input type="text" class="value" name="attr_experience_mod_temp" value="0"/></td>
                            <td>=</td>
                            <td colspan="2"></td>
                            <td><input type="number" class="total" name="attr_experience_mod" value="(@{experience_mod_std}+@{experience_mod_temp})" disabled/></td>
                        </tr>
                        <tr>
                            <td class="attribute-label">Healing Rate: </td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td>
                                <select class="full" name="attr_healing_rate">
                                    <option value="72">72</option>
                                    <option value="48">48</option>
                                    <option value="36">36</option>
                                    <option value="24">24</option>
                                    <option value="24">18</option>
                                    <option value="24">12</option>
                                </select>
                            </td>
                        </tr>
                    </table>
                    <table class="full">
                        <tr class="head">
                            <td><h5>Attribute</h5></td>
                            <td><h5>Standard</h5></td>
                            <td><h5>Current</h5></td>
                        </tr>
                        <tr>
                            <td class="attribute-label">Damage Mod: </td>
                            <td class="attribute_value">
                                <select class="full" name="attr_damage_mod_std">
                                    <option value="-1d8">-1d8</option>
                                    <option value="-1d6">-1d6</option>
                                    <option value="-1d4">-1d4</option>
                                    <option value="-1d2">-1d2</option>
                                    <option value="0" selected>+0</option>
                                    <option value="1d2">+1d2</option>
                                    <option value="1d4">+1d4</option>
                                    <option value="1d6">+1d6</option>
                                    <option value="1d8">+1d8</option>
                                    <option value="1d10">+1d10</option>
                                    <option value="1d12">+1d12</option>
                                    <option value="2d6">+2d6</option>
                                    <option value="1d8+1d6">+1d8+1d6</option>
                                    <option value="2d8">+2d8</option>
                                    <option value="1d10+1d8">+1d10+1d8</option>
                                    <option value="2d10">+2d10</option>
                                    <option value="2d10+1d2">+2d10+1d2</option>
                                    <option value="2d10+1d4">+2d10+1d4</option>
                                    <option value="2d10+1d6">+2d10+1d6</option>
                                    <option value="2d10+1d8">+2d10+1d8</option>
                                    <option value="3d10">+3d10</option>
                                    <option value="2d10+1d12">+2d10+1d12</option>
                                    <option value="2d10+2d6">+2d10+2d6</option>
                                </select>
                            </td>
                            <td class="attribute_value">
                                <select class="full" name="attr_damage_mod">
                                    <option value="@{damage_mod_std}" selected>Same</option>
                                    <option value="-1d8">-1d8</option>
                                    <option value="-1d6">-1d6</option>
                                    <option value="-1d4">-1d4</option>
                                    <option value="-1d2">-1d2</option>
                                    <option value="0">+0</option>
                                    <option value="1d2">+1d2</option>
                                    <option value="1d4">+1d4</option>
                                    <option value="1d6">+1d6</option>
                                    <option value="1d8">+1d8</option>
                                    <option value="1d10">+1d10</option>
                                    <option value="1d12">+1d12</option>
                                    <option value="2d6">+2d6</option>
                                    <option value="1d8+1d6">+1d8+1d6</option>
                                    <option value="2d8">+2d8</option>
                                    <option value="1d10+1d8">+1d10+1d8</option>
                                    <option value="2d10">+2d10</option>
                                    <option value="2d10+1d2">+2d10+1d2</option>
                                    <option value="2d10+1d4">+2d10+1d4</option>
                                    <option value="2d10+1d6">+2d10+1d6</option>
                                    <option value="2d10+1d8">+2d10+1d8</option>
                                    <option value="3d10">+3d10</option>
                                    <option value="2d10+1d4">+2d10+1d12</option>
                                    <option value="2d10+1d4">+2d10+2d6</option>
                                </select>
                            </td>
                        </tr>
                    </table>
                    <br>
                </div>
            </div>
            <br style="clear:both;"/>
            <div class="column-1of1">
                <div class="section">
                    <table class="full">
                        <tr>
                            <td style="white-space: nowrap"><h3>Fatigue</h3></td>
                            <td style="width: 100%; text-align: right;"><h5 style="display: inline">Current Level: </h5>
                                <select class="fatigue-select" name="attr_fatigue">
                                    <option value="Fresh" selected>Fresh</option>
                                    <option value="Winded">Winded</option>
                                    <option value="Tired">Tired</option>
                                    <option value="Wearied">Wearied</option>
                                    <option value="Exhausted">Exhausted</option>
                                    <option value="Debilitated">Debilitated</option>
                                </select>
                            </td>
                        </tr>
                    </table>
                    <input type="hidden" name="attr_hidden_fatigue_skillgrade" value="0" />
                    <input type="hidden" name="attr_hidden_fatigue_movement" value="0" />
                    <input type="hidden" name="attr_hidden_fatigue_strike_rank" value="0" />
                    <input type="hidden" name="attr_hidden_fatigue_action_points" value="0" />
                    <input type="hidden" name="attr_hidden_fatigue_skillgrade1" value="Standard" />
                    <input type="hidden" name="attr_hidden_fatigue_movement1" value="No Penalties" />
                    <input type="hidden" name="attr_hidden_fatigue_strike_rank1" value="No Penalties" />
                    <input type="hidden" name="attr_hidden_fatigue_action_points1" value="No Penalties" />
                    <table class="full">
                        <tr class="head">
                            <td class="fatigue_skillgrade"><h5>Skill Grade</h5></td>
                            <td class="fatigue_movement"><h5>Movement</h5></td>
                            <td class="fatigue_strike_rank"><h5>Strike Rank</h5></td>
                            <td class="fatigue_action_points"><h5>Combat Actions</h5></td>
                        </tr>
                        <td><input class="full" type="text" name="attr_fatigue_skillgrade" value="@{hidden_fatigue_skillgrade1}"disabled/></td>
                        <td><input class="full" type="text" name="attr_fatigue_movement" value="@{hidden_fatigue_movement1}"disabled/></td>
                        <td><input class="full" type="text" name="attr_fatigue_strike_rank" value="@{hidden_fatigue_strike_rank1}"disabled/></td>
                        <td><input class="full" type="text" name="attr_fatigue_action_points" value="@{hidden_fatigue_action_points1}"disabled/></td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>

        <div class="page combat-page">
            <div class="section">
                <h3>Combat Styles</h3>
                <table class="full_fixed">
                    <tr class="head">
                        <td class="cs_style"><h5>Melee Styles</h5></td>
                        <td class="cs_calc"><h5>Base+Points+Augment</h5></td>
                        <td class="cs_symbol"><h5>=</h5></td>
                        <td class="cs_number"><h5>%</h5></td>
                        <td class="cs_roll"></td>
                        <td class="cs_weapons"><h5>Weapons</h5></td>
                        <td class="cs_benefits"><h5>Benefits</h5></td>
                    </tr>
                </table>
                <table class="full_fixed">
                    <tr>
                        <td class="cs_style"><input class="full" type="text" name="attr_unarmed_name" value="Unarmed" disabled="true"></td>
                        <td class="cs_calc">STR+DEX+<input class="value" type="text" name="attr_unarmed_cs_points" value="@{unarmed_points}" disabled="true">+<input class="value" type="text" name="attr_unarmed_cs_temp" value="@{unarmed_temp}" disabled="true"></td>
                        <td class="cs_symbol">=</td>
                        <td class="cs_number"><input class="total" type="number" name="attr_unarmed_cs_total" value="(@{hidden_str}+@{hidden_dex}+@{unarmed_points}+@{unarmed_temp})" disabled="true"></td>
                        <td class="cs_roll"><button type='roll' name="roll_unarmed_cs_check" value="&{template:runequest} {{name=Unarmed}} {{very_easy=[[@{unarmed_cs_total}+@{hidden_fatigue_skillgrade}]]}} {{very_easy_crit=[[ceil((@{unarmed_cs_total}+@{hidden_fatigue_skillgrade})*.1)]]}}  {{rolled=[[ 1d100 ]]}}">
                            <button type='roll' name="roll_unarmed_cs_check_penalized" value="&{template:runequest} {{name=Unarmed}} {{very_easy=[[ @{unarmed_cs_total}+?{Penalty|0}+@{hidden_fatigue_skillgrade} ]]}} {{very_easy_crit=[[ ceil( (@{unarmed_cs_total}+?{Penalty|0}+@{hidden_fatigue_skillgrade})*.1 ) ]]}}  {{rolled=[[ 1d100 ]]}}">+?</td>
                        <td class="cs_weapons"><input class="full" type="text" name="attr_unarmed_cs_weapons"></td>
                        <td class="cs_benefits"><input class="full" type="text" name="attr_unarmed_cs_benefits"></td>
                    </tr>
                </table>
                <fieldset class="repeating_meleestyles">
                    <table class="full_fixed">
                        <tr>
                            <td class="cs_style"><input class="full" type="text" name="attr_stylename"></td>
                            <td class="cs_calc">STR+DEX+<input class="value" type="text" name="attr_points" value="0">+<input class="value" type="text" name="attr_temp" value="0"></td>
                            <td class="cs_symbol">=</td>
                            <td class="cs_number"><input class="total" type="number" name="attr_total" value="(@{hidden_str}+@{hidden_dex}+@{points}+@{temp})" disabled="true"></td>
                            <td class="cs_roll"><button type='roll' name="roll_check" value="&{template:runequest} {{name=@{stylename}}} {{very_easy=[[@{total}+@{hidden_fatigue_skillgrade}]]}} {{very_easy_crit=[[ceil((@{total}+@{hidden_fatigue_skillgrade})*.1)]]}}  {{rolled=[[ 1d100 ]]}}">
                                <button type='roll' name="roll_check_penalized" value="&{template:runequest} {{name=@{stylename}}} {{very_easy=[[ @{total}+?{Penalty|0}+@{hidden_fatigue_skillgrade} ]]}} {{very_easy_crit=[[ ceil( (@{total}+?{Penalty|0}+@{hidden_fatigue_skillgrade})*.1 ) ]]}}  {{rolled=[[ 1d100 ]]}}">+?</td>
                            <td class="cs_weapons"><input class="full" type="text" name="attr_weapons"></td>
                            <td class="cs_benefits"><input class="full" type="text" name="attr_benefits"></td>
                        </tr>
                    </table>
                </fieldset>
                <h5>Ranged Styles</h5>
                <fieldset class="repeating_rangestyles">
                    <table class="full_fixed">
                        <tr>
                            <td class="cs_style"><input class="full" type="text" name="attr_stylename"></td>
                            <td class="cs_calc">DEXx2+<input class="value" type="text" name="attr_points" value="0">+<input class="value" type="text" name="attr_temp" value="0"></td>
                            <td class="cs_symbol">=</td>
                            <td class="cs_number"><input class="total" type="number" name="attr_total" value="(@{hidden_dex}+@{hidden_dex}+@{points}+@{temp})" disabled="true"></td>
                            <td class="cs_roll"><button type='roll' name="roll_check" value="&{template:runequest} {{name=@{stylename}}} {{very_easy=[[@{total}+@{hidden_fatigue_skillgrade}]]}} {{very_easy_crit=[[ceil((@{total}+@{hidden_fatigue_skillgrade})*.1)]]}}  {{rolled=[[ 1d100 ]]}}">
                                <button type='roll' name="roll_check_penalized" value="&{template:runequest} {{name=@{stylename}}} {{very_easy=[[ @{total}+?{Penalty|0}+@{hidden_fatigue_skillgrade} ]]}} {{very_easy_crit=[[ ceil( (@{total}+?{Penalty|0}+@{hidden_fatigue_skillgrade})*.1 ) ]]}}  {{rolled=[[ 1d100 ]]}}">+?</td>
                            <td class="cs_weapons"><input class="full" type="text" name="attr_weapons"></td>
                            <td class="cs_benefits"><input class="full" type="text" name="attr_benefits"></td>
                        </tr>
                    </table>
                </fieldset>
            </div>
            <span style="display:block;margin-bottom:1%;"></span>
            <div class="section">
                <h3>Shields & Weapons</h3>
                <table class="full_fixed">
                    <tr class="head">
                        <td class="weapon"><h5>Weapon</h5></td>
                        <td class="weapon_damage"><h5>Damage</h5></td>
                        <td class="weapon_size"><h5>Size</h5></td>
                        <td class="weapon_reach"><h5>Reach</h5></td>
                        <td class="weapon_enc"><h5>ENC</h5></td>
                        <td class="weapon_ap"><h5>AP</h5></td>
                        <td class="weapon_hp"><h5>HP</h5></td>
                        <td class="weapon_manoeuvres"><h5>Manoeuvres</h5></td>
                        <td class="weapon_load"><h5>Load</h5></td>
                    </tr>
                </table>
                <fieldset class="repeating_weapons">
                    <table class="full_fixed">
                        <tr>
                            <td class="weapon"><input class="full" type="text" name="attr_weapon_name"/></td>
                            <td class="weapon_damage"><input class="damage" type="text" name="attr_weapon_damage"/><select name="attr_weapon_db" class="db"><option value="0" selected>+0</option><option value="@{damage_mod}">+db</option></select><button type="roll" name="roll_weapon_damage_check" value="&{template:runequest-weapon} {{name=@{weapon_name}}} {{damage=[[@{weapon_damage}+@{weapon_db}]]}} {{size/reach=@{weapon_size}/@{weapon_reach}}} {{manoeuvres=@{weapon_manoeuvres}}}" /></td>
                            <td class="weapon_size"><input class="value_full" type="text" name="attr_weapon_size"/></td>
                            <td class="weapon_reach"><input class="value_full" type="text" name="attr_weapon_reach"/></td>
                            <td class="weapon_enc"><input class="value_full" type="number" name="attr_weapon_enc" value="0"/></td>
                            <td class="weapon_ap"><input class="value" type="number" name="attr_weapon_ap"/>/<input class="value" type="number" name="attr_weapon_ap_max"/></td>
                            <td class="weapon_hp"><input class="value" type="number" name="attr_weapon_hp"/>/<input class="value" type="number" name="attr_weapon_hp_max"/></td>
                            <td class="weapon_manoeuvres"><input class="full" type="text" name="attr_weapon_manoeuvres"/></td>
                            <td class="weapon_load"><input class="value_full" type="number" name="attr_weapon_load"/></td>
                        </tr>
                    </table>
                </fieldset>
            </div>
        </div>

        <div class="page skills-page">
            <div class="column-1of2">
                <div class="section">
                    <h3>Common Skills</h3>
                    <table class="full_fixed">
                        <tr class="head">
                            <td class="skill"><h5>Skill</h5></td>
                            <td class="skill_calc_label"><h5>Base+Points+Augment</h5></td>
                            <td class="skill_symbol"><h5>=</h5></td>
                            <td class="skill_total"><h5>%</h5></td>
                            <td class="skill_roll"></td>
                        </tr>
                        <tr>
                            <td class="skill">Athletics</td>
                            <td class="skill_calc">STR+DEX+<input type="text" class="value" name="attr_athletics_points" value="0"/>+<input type="text" class="value" name="attr_athletics_temp" value="0"/></td>
                            <td class="skill_symbol">=</td>
                            <td class="skill_total"><input type="number" class="total" name="attr_athletics_total" value="(@{hidden_str}+@{hidden_dex}+@{athletics_points}+@{athletics_temp})" disabled="true"/></td>
                            <td class="skill_roll"><button type='roll' name="roll_athletics_check" value="&{template:runequest} {{name=Athletics}} {{very_easy=[[@{athletics_total}+@{hidden_fatigue_skillgrade}]]}} {{very_easy_crit=[[ceil((@{athletics_total}+@{hidden_fatigue_skillgrade})*.1)]]}}  {{rolled=[[ 1d100 ]]}}">
                                <button type='roll' name="roll_athletics_check_penalized" value="&{template:runequest} {{name=Athletics}} {{very_easy=[[ @{athletics_total}+?{Penalty|0}+@{hidden_fatigue_skillgrade} ]]}} {{very_easy_crit=[[ ceil( (@{athletics_total}+?{Penalty|0}+@{hidden_fatigue_skillgrade})*.1 ) ]]}}  {{rolled=[[ 1d100 ]]}}">+?</td>
                        </tr>
                        <tr>
                            <td class="skill">Brawn</td>
                            <td class="skill_calc">STR+SIZ+<input type="text" class="value" name="attr_brawn_points" value="0"/>+<input type="text" class="value" name="attr_brawn_temp" value="0"/></td>
                            <td class="skill_symbol">=</td>
                            <td class="skill_total"><input type="number" class="total" name="attr_brawn_total" value="(@{hidden_str}+@{hidden_siz}+@{brawn_points}+@{brawn_temp})" disabled="true"/></td>
                            <td class="skill_roll"><button type='roll' name="roll_brawn_check" value="&{template:runequest} {{name=Brawn}} {{very_easy=[[@{brawn_total}+@{hidden_fatigue_skillgrade}]]}} {{very_easy_crit=[[ceil((@{brawn_total}+@{hidden_fatigue_skillgrade})*.1)]]}}  {{rolled=[[ 1d100 ]]}}">
                                <button type='roll' name="roll_brawn_check_penalized" value="&{template:runequest} {{name=Brawn}} {{very_easy=[[ @{brawn_total}+?{Penalty|0}+@{hidden_fatigue_skillgrade} ]]}} {{very_easy_crit=[[ ceil( (@{brawn_total}+?{Penalty|0}+@{hidden_fatigue_skillgrade})*.1 ) ]]}}  {{rolled=[[ 1d100 ]]}}">+?</td>
                        </tr>
                        <tr>
                            <td class="skill">Culture (Own)</td>
                            <td class="skill_calc">INTx2+<input type="text" class="value" name="attr_culture_(own)_points" value="0"/>+<input type="text" class="value" name="attr_culture_(own)_temp" value="0"/></td>
                            <td class="skill_symbol">=</td>
                            <td class="skill_total"><input type="number" class="total" name="attr_culture_(own)_total" value="(@{hidden_int}+@{hidden_int}+@{culture_(own)_points}+@{culture_(own)_temp})" disabled="true"/></td>
                            <td class="skill_roll"><button type='roll' name="roll_culture_(own)_check" value="&{template:runequest} {{name=Culture (Own)}} {{very_easy=[[@{culture_(own)_total}+@{hidden_fatigue_skillgrade}]]}} {{very_easy_crit=[[ceil((@{culture_(own)_total}+@{hidden_fatigue_skillgrade})*.1)]]}}  {{rolled=[[ 1d100 ]]}}">
                                <button type='roll' name="roll_culture_(own)_check_penalized" value="&{template:runequest} {{name=Culture (Own)}} {{very_easy=[[ @{culture_(own)_total}+?{Penalty|0}+@{hidden_fatigue_skillgrade} ]]}} {{very_easy_crit=[[ ceil( (@{culture_(own)_total}+?{Penalty|0}+@{hidden_fatigue_skillgrade})*.1 ) ]]}}  {{rolled=[[ 1d100 ]]}}">+?</td>
                        </tr>
                        <tr>
                            <td class="skill">Dance</td>
                            <td class="skill_calc">DEX+CHA+<input type="text" class="value" name="attr_dance_points" value="0"/>+<input type="text" class="value" name="attr_dance_temp" value="0"/></td>
                            <td class="skill_symbol">=</td>
                            <td class="skill_total"><input type="number" class="total" name="attr_dance_total" value="(@{hidden_dex}+@{hidden_cha}+@{dance_points}+@{dance_temp})" disabled="true"/></td>
                            <td class="skill_roll"><button type='roll' name="roll_dance_check" value="&{template:runequest} {{name=Dance}} {{very_easy=[[@{dance_total}+@{hidden_fatigue_skillgrade}]]}} {{very_easy_crit=[[ceil((@{dance_total}+@{hidden_fatigue_skillgrade})*.1)]]}}  {{rolled=[[ 1d100 ]]}}">
                                <button type='roll' name="roll_dance_check_penalized" value="&{template:runequest} {{name=Dance}} {{very_easy=[[ @{dance_total}+?{Penalty|0}+@{hidden_fatigue_skillgrade} ]]}} {{very_easy_crit=[[ ceil( (@{dance_total}+?{Penalty|0}+@{hidden_fatigue_skillgrade})*.1 ) ]]}}  {{rolled=[[ 1d100 ]]}}">+?</td>
                        </tr>
                        <tr>
                            <td class="skill">Drive</td>
                            <td class="skill_calc">DEX+POW+<input type="text" class="value" name="attr_drive_points" value="0"/>+<input type="text" class="value" name="attr_drive_temp" value="0"/></td>
                            <td class="skill_symbol">=</td>
                            <td class="skill_total"><input type="number" class="total" name="attr_drive_total" value="(@{hidden_dex}+@{hidden_pow}+@{drive_points}+@{drive_temp})" disabled="true"/></td>
                            <td class="skill_roll"><button type='roll' name="roll_drive_check" value="&{template:runequest} {{name=Drive}} {{very_easy=[[@{drive_total}+@{hidden_fatigue_skillgrade}]]}} {{very_easy_crit=[[ceil((@{drive_total}+@{hidden_fatigue_skillgrade})*.1)]]}}  {{rolled=[[ 1d100 ]]}}">
                                <button type='roll' name="roll_drive_check_penalized" value="&{template:runequest} {{name=Drive}} {{very_easy=[[ @{drive_total}+?{Penalty|0}+@{hidden_fatigue_skillgrade} ]]}} {{very_easy_crit=[[ ceil( (@{drive_total}+?{Penalty|0}+@{hidden_fatigue_skillgrade})*.1 ) ]]}}  {{rolled=[[ 1d100 ]]}}">+?</td>
                        </tr>
                        <tr>
                            <td class="skill">Evade</td>
                            <td class="skill_calc">DEXx2+<input type="text" class="value" name="attr_evade_points" value="0"/>+<input type="text" class="value" name="attr_evade_temp" value="0"/></td>
                            <td class="skill_symbol">=</td>
                            <td class="skill_total"><input type="number" class="total" name="attr_evade_total" value="(@{hidden_dex}+@{hidden_dex}+@{evade_points}+@{evade_temp})" disabled="true"/></td>
                            <td class="skill_roll"><button type='roll' name="roll_evade_check" value="&{template:runequest} {{name=Evade}} {{very_easy=[[@{evade_total}+@{hidden_fatigue_skillgrade}]]}} {{very_easy_crit=[[ceil((@{evade_total}+@{hidden_fatigue_skillgrade})*.1)]]}}  {{rolled=[[ 1d100 ]]}}">
                                <button type='roll' name="roll_evade_check_penalized" value="&{template:runequest} {{name=Evade}} {{very_easy=[[ @{evade_total}+?{Penalty|0}+@{hidden_fatigue_skillgrade} ]]}} {{very_easy_crit=[[ ceil( (@{evade_total}+?{Penalty|0}+@{hidden_fatigue_skillgrade})*.1 ) ]]}}  {{rolled=[[ 1d100 ]]}}">+?</td>
                        </tr>
                        <tr>
                            <td class="skill">Evaluate</td>
                            <td class="skill_calc">INT+CHA+<input type="text" class="value" name="attr_evaluate_points" value="0"/>+<input type="text" class="value" name="attr_evaluate_temp" value="0"/></td>
                            <td class="skill_symbol">=</td>
                            <td class="skill_total"><input type="number" class="total" name="attr_evaluate_total" value="(@{hidden_int}+@{hidden_cha}+@{evaluate_points}+@{evaluate_temp})" disabled="true"/></td>
                            <td class="skill_roll"><button type='roll' name="roll_evaluate_check" value="&{template:runequest} {{name=Evaluate}} {{very_easy=[[@{evaluate_total}+@{hidden_fatigue_skillgrade}]]}} {{very_easy_crit=[[ceil((@{evaluate_total}+@{hidden_fatigue_skillgrade})*.1)]]}}  {{rolled=[[ 1d100 ]]}}">
                                <button type='roll' name="roll_evaluate_check_penalized" value="&{template:runequest} {{name=Evaluate}} {{very_easy=[[ @{evaluate_total}+?{Penalty|0}+@{hidden_fatigue_skillgrade} ]]}} {{very_easy_crit=[[ ceil( (@{evaluate_total}+?{Penalty|0}+@{hidden_fatigue_skillgrade})*.1 ) ]]}}  {{rolled=[[ 1d100 ]]}}">+?</td>
                        </tr>
                        <tr>
                            <td class="skill">First Aid</td>
                            <td class="skill_calc">INT+DEX+<input type="text" class="value" name="attr_first_aid_points" value="0"/>+<input type="text" class="value" name="attr_first_aid_temp" value="0"/></td>
                            <td class="skill_symbol">=</td>
                            <td class="skill_total"><input type="number" class="total" name="attr_first_aid_total" value="(@{hidden_int}+@{hidden_dex}+@{first_aid_points}+@{first_aid_temp})" disabled="true"/></td>
                            <td class="skill_roll"><button type='roll' name="roll_first_aid_check" value="&{template:runequest} {{name=First Aid}} {{very_easy=[[@{first_aid_total}+@{hidden_fatigue_skillgrade}]]}} {{very_easy_crit=[[ceil((@{first_aid_total}+@{hidden_fatigue_skillgrade})*.1)]]}}  {{rolled=[[ 1d100 ]]}}">
                                <button type='roll' name="roll_first_aid_check_penalized" value="&{template:runequest} {{name=First Aid}} {{very_easy=[[ @{first_aid_total}+?{Penalty|0}+@{hidden_fatigue_skillgrade} ]]}} {{very_easy_crit=[[ ceil( (@{first_aid_total}+?{Penalty|0}+@{hidden_fatigue_skillgrade})*.1 ) ]]}}  {{rolled=[[ 1d100 ]]}}">+?</td>
                        </tr>
                        <tr>
                            <td class="skill">Influence</td>
                            <td class="skill_calc">CHAx2+<input type="text" class="value" name="attr_influence_points" value="0"/>+<input type="text" class="value" name="attr_influence_temp" value="0"/></td>
                            <td class="skill_symbol">=</td>
                            <td class="skill_total"><input type="number" class="total" name="attr_influence_total" value="(@{hidden_cha}+@{hidden_cha}+@{influence_points}+@{influence_temp})" disabled="true"/></td>
                            <td class="skill_roll"><button type='roll' name="roll_influence_check" value="&{template:runequest} {{name=Influence}} {{very_easy=[[@{influence_total}+@{hidden_fatigue_skillgrade}]]}} {{very_easy_crit=[[ceil((@{influence_total}+@{hidden_fatigue_skillgrade})*.1)]]}}  {{rolled=[[ 1d100 ]]}}">
                                <button type='roll' name="roll_influence_check_penalized" value="&{template:runequest} {{name=Influence}} {{very_easy=[[ @{influence_total}+?{Penalty|0}+@{hidden_fatigue_skillgrade} ]]}} {{very_easy_crit=[[ ceil( (@{influence_total}+?{Penalty|0}+@{hidden_fatigue_skillgrade})*.1 ) ]]}}  {{rolled=[[ 1d100 ]]}}">+?</td>
                        </tr>
                        <tr>
                            <td class="skill">Insight</td>
                            <td class="skill_calc">INT+POW+<input type="text" class="value" name="attr_insight_points" value="0"/>+<input type="text" class="value" name="attr_insight_temp" value="0"/></td>
                            <td class="skill_symbol">=</td>
                            <td class="skill_total"><input type="number" class="total" name="attr_insight_total" value="(@{hidden_int}+@{hidden_pow}+@{insight_points}+@{insight_temp})" disabled="true"/></td>
                            <td class="skill_roll"><button type='roll' name="roll_insight_check" value="&{template:runequest} {{name=Insight}} {{very_easy=[[@{insight_total}+@{hidden_fatigue_skillgrade}]]}} {{very_easy_crit=[[ceil((@{insight_total}+@{hidden_fatigue_skillgrade})*.1)]]}}  {{rolled=[[ 1d100 ]]}}">
                                <button type='roll' name="roll_insight_check_penalized" value="&{template:runequest} {{name=Insight}} {{very_easy=[[ @{insight_total}+?{Penalty|0}+@{hidden_fatigue_skillgrade} ]]}} {{very_easy_crit=[[ ceil( (@{insight_total}+?{Penalty|0}+@{hidden_fatigue_skillgrade})*.1 ) ]]}}  {{rolled=[[ 1d100 ]]}}">+?</td>
                        </tr>
                        <tr>
                            <td class="skill">Lore (Regional)</td>
                            <td class="skill_calc">INTx2+<input type="text" class="value" name="attr_lore_(regional)_points" value="0"/>+<input type="text" class="value" name="attr_lore_(regional)_temp" value="0"/></td>
                            <td class="skill_symbol">=</td>
                            <td class="skill_total"><input type="number" class="total" name="attr_lore_(regional)_total" value="(@{hidden_int}+@{hidden_int}+@{lore_(regional)_points}+@{lore_(regional)_temp})" disabled="true"/></td>
                            <td class="skill_roll"><button type='roll' name="roll_lore_(regional)_check" value="&{template:runequest} {{name=Lore (Regional)}} {{very_easy=[[@{lore_(regional)_total}+@{hidden_fatigue_skillgrade}]]}} {{very_easy_crit=[[ceil((@{lore_(regional)_total}+@{hidden_fatigue_skillgrade})*.1)]]}}  {{rolled=[[ 1d100 ]]}}}">
                                <button type='roll' name="roll_lore_(regional)_check_penalized" value="&{template:runequest} {{name=Lore (Regional)}} {{very_easy=[[ @{lore_(regional)_total}+?{Penalty|0}+@{hidden_fatigue_skillgrade} ]]}} {{very_easy_crit=[[ ceil( (@{lore_(regional)_total}+?{Penalty|0}+@{hidden_fatigue_skillgrade})*.1 ) ]]}}  {{rolled=[[ 1d100 ]]}}">+?</td>
                        </tr>
                        <tr>
                            <td class="skill">Perception</td>
                            <td class="skill_calc">INT+POW+<input type="text" class="value" name="attr_perception_points" value="0"/>+<input type="text" class="value" name="attr_perception_temp" value="0"/></td>
                            <td class="skill_symbol">=</td>
                            <td class="skill_total"><input type="number" class="total" name="attr_perception_total" value="(@{hidden_int}+@{hidden_pow}+@{perception_points}+@{perception_temp})" disabled="true"/></td>
                            <td class="skill_roll"><button type='roll' name="roll_perception_check" value="&{template:runequest} {{name=Perception}} {{very_easy=[[@{perception_total}+@{hidden_fatigue_skillgrade}]]}} {{very_easy_crit=[[ceil((@{perception_total}+@{hidden_fatigue_skillgrade})*.1)]]}}  {{rolled=[[ 1d100 ]]}}">
                                <button type='roll' name="roll_perception_check_penalized" value="&{template:runequest} {{name=Perception}} {{very_easy=[[ @{perception_total}+?{Penalty|0}+@{hidden_fatigue_skillgrade} ]]}} {{very_easy_crit=[[ ceil( (@{perception_total}+?{Penalty|0}+@{hidden_fatigue_skillgrade})*.1 ) ]]}}  {{rolled=[[ 1d100 ]]}}">+?</td>
                        </tr>
                        <tr>
                            <td class="skill">Persistence</td>
                            <td class="skill_calc">POWx2+<input type="text" class="value" name="attr_persistence_points" value="0"/>+<input type="text" class="value" name="attr_persistence_temp" value="0"/></td>
                            <td class="skill_symbol">=</td>
                            <td class="skill_total"><input type="number" class="total" name="attr_persistence_total" value="(@{hidden_pow}+@{hidden_pow}+@{persistence_points}+@{persistence_temp})" disabled="true"/></td>
                            <td class="skill_roll"><button type='roll' name="roll_persistence_check" value="&{template:runequest} {{name=Persistence}} {{very_easy=[[@{persistence_total}+@{hidden_fatigue_skillgrade}]]}} {{very_easy_crit=[[ceil((@{persistence_total}+@{hidden_fatigue_skillgrade})*.1)]]}}  {{rolled=[[ 1d100 ]]}}">
                                <button type='roll' name="roll_persistence_check_penalized" value="&{template:runequest} {{name=Persistence}} {{very_easy=[[ @{persistence_total}+?{Penalty|0}+@{hidden_fatigue_skillgrade} ]]}} {{very_easy_crit=[[ ceil( (@{persistence_total}+?{Penalty|0}+@{hidden_fatigue_skillgrade})*.1 ) ]]}}  {{rolled=[[ 1d100 ]]}}">+?</td>
                        </tr>
                        <tr>
                            <td class="skill">Resilience</td>
                            <td class="skill_calc">CONx2+<input type="text" class="value" name="attr_resilience_points" value="0"/>+<input type="text" class="value" name="attr_resilience_temp" value="0"/></td>
                            <td class="skill_symbol">=</td>
                            <td class="skill_total"><input type="number" class="total" name="attr_resilience_total" value="(@{hidden_con}+@{hidden_con}+@{resilience_points}+@{resilience_temp})" disabled="true"/></td>
                            <td class="skill_roll"><button type='roll' name="roll_resilience_check" value="&{template:runequest} {{name=Resilience}} {{very_easy=[[@{resilience_total}+@{hidden_fatigue_skillgrade}]]}} {{very_easy_crit=[[ceil((@{resilience_total}+@{hidden_fatigue_skillgrade})*.1)]]}}  {{rolled=[[ 1d100 ]]}}">
                                <button type='roll' name="roll_resilience_check_penalized" value="&{template:runequest} {{name=Resilience}} {{very_easy=[[ @{resilience_total}+?{Penalty|0}+@{hidden_fatigue_skillgrade} ]]}} {{very_easy_crit=[[ ceil( (@{resilience_total}+?{Penalty|0}+@{hidden_fatigue_skillgrade})*.1 ) ]]}}  {{rolled=[[ 1d100 ]]}}">+?</td>
                        </tr>
                        <tr>
                            <td class="skill">Ride</td>
                            <td class="skill_calc">DEX+POW+<input type="text" class="value" name="attr_ride_points" value="0"/>+<input type="text" class="value" name="attr_ride_temp" value="0"/></td>
                            <td class="skill_symbol">=</td>
                            <td class="skill_total"><input type="number" class="total" name="attr_ride_total" value="(@{hidden_dex}+@{hidden_pow}+@{ride_points}+@{ride_temp})" disabled="true"/></td>
                            <td class="skill_roll"><button type='roll' name="roll_ride_check" value="&{template:runequest} {{name=Ride}} {{very_easy=[[@{ride_total}+@{hidden_fatigue_skillgrade}]]}} {{very_easy_crit=[[ceil((@{ride_total}+@{hidden_fatigue_skillgrade})*.1)]]}}  {{rolled=[[ 1d100 ]]}}">
                                <button type='roll' name="roll_ride_check_penalized" value="&{template:runequest} {{name=Ride}} {{very_easy=[[ @{ride_total}+?{Penalty|0}+@{hidden_fatigue_skillgrade} ]]}} {{very_easy_crit=[[ ceil( (@{ride_total}+?{Penalty|0}+@{hidden_fatigue_skillgrade})*.1 ) ]]}}  {{rolled=[[ 1d100 ]]}}">+?</td>
                        </tr>
                        <tr>
                            <td class="skill">Sing</td>
                            <td class="skill_calc">CHA+POW+<input type="text" class="value" name="attr_sing_points" value="0"/>+<input type="text" class="value" name="attr_sing_temp" value="0"/></td>
                            <td class="skill_symbol">=</td>
                            <td class="skill_total"><input type="number" class="total" name="attr_sing_total" value="(@{hidden_cha}+@{hidden_pow}+@{sing_points}+@{sing_temp})" disabled="true"/></td>
                            <td class="skill_roll"><button type='roll' name="roll_sing_check" value="&{template:runequest} {{name=Sing}} {{very_easy=[[@{sing_total}+@{hidden_fatigue_skillgrade}]]}} {{very_easy_crit=[[ceil((@{sing_total}+@{hidden_fatigue_skillgrade})*.1)]]}}  {{rolled=[[ 1d100 ]]}}">
                                <button type='roll' name="roll_sing_check_penalized" value="&{template:runequest} {{name=Sing}} {{very_easy=[[ @{sing_total}+?{Penalty|0}+@{hidden_fatigue_skillgrade} ]]}} {{very_easy_crit=[[ ceil( (@{sing_total}+?{Penalty|0}+@{hidden_fatigue_skillgrade})*.1 ) ]]}}  {{rolled=[[ 1d100 ]]}}">+?</td>
                        </tr>
                        <tr>
                            <td class="skill">Sleight</td>
                            <td class="skill_calc">DEX+CHA+<input type="text" class="value" name="attr_sleight_points" value="0"/>+<input type="text" class="value" name="attr_sleight_temp" value="0"/></td>
                            <td class="skill_symbol">=</td>
                            <td class="skill_total"><input type="number" class="total" name="attr_sleight_total" value="(@{hidden_dex}+@{hidden_cha}+@{sleight_points}+@{sleight_temp})" disabled="true"/></td>
                            <td class="skill_roll"><button type='roll' name="roll_sleight_check" value="&{template:runequest} {{name=Sleight}} {{very_easy=[[@{sleight_total}+@{hidden_fatigue_skillgrade}]]}} {{very_easy_crit=[[ceil((@{sleight_total}+@{hidden_fatigue_skillgrade})*.1)]]}}  {{rolled=[[ 1d100 ]]}}">
                                <button type='roll' name="roll_sleight_check_penalized" value="&{template:runequest} {{name=Sleight}} {{very_easy=[[ @{sleight_total}+?{Penalty|0}+@{hidden_fatigue_skillgrade} ]]}} {{very_easy_crit=[[ ceil( (@{sleight_total}+?{Penalty|0}+@{hidden_fatigue_skillgrade})*.1 ) ]]}}  {{rolled=[[ 1d100 ]]}}">+?</td>
                        </tr>
                        <tr>
                            <td class="skill">Stealth</td>
                            <td class="skill_calc">INT+DEX+<input type="text" class="value" name="attr_stealth_points" value="0"/>+<input type="text" class="value" name="attr_stealth_temp" value="0"/></td>
                            <td class="skill_symbol">=</td>
                            <td class="skill_total"><input type="number" class="total" name="attr_stealth_total" value="(@{hidden_int}+@{hidden_dex}+@{stealth_points}+@{stealth_temp})" disabled="true"/></td>
                            <td class="skill_roll"><button type='roll' name="roll_stealth_check" value="&{template:runequest} {{name=Stealth}} {{very_easy=[[@{stealth_total}+@{hidden_fatigue_skillgrade}]]}} {{very_easy_crit=[[ceil((@{stealth_total}+@{hidden_fatigue_skillgrade})*.1)]]}}  {{rolled=[[ 1d100 ]]}}">
                                <button type='roll' name="roll_stealth_check_penalized" value="&{template:runequest} {{name=Stealth}} {{very_easy=[[ @{stealth_total}+?{Penalty|0}+@{hidden_fatigue_skillgrade} ]]}} {{very_easy_crit=[[ ceil( (@{stealth_total}+?{Penalty|0}+@{hidden_fatigue_skillgrade})*.1 ) ]]}}  {{rolled=[[ 1d100 ]]}}">+?</td>
                        </tr>
                        <tr>
                            <td class="skill">Swim</td>
                            <td class="skill_calc">STR+CON+<input type="text" class="value" name="attr_swim_points" value="0"/>+<input type="text" class="value" name="attr_swim_temp" value="0"/></td>
                            <td class="skill_symbol">=</td>
                            <td class="skill_total"><input type="number" class="total" name="attr_swim_total" value="(@{hidden_str}+@{hidden_con}+@{swim_points}+@{swim_temp})" disabled="true"/></td>
                            <td class="skill_roll"><button type='roll' name="roll_swim_check" value="&{template:runequest} {{name=Swim}} {{very_easy=[[@{swim_total}+@{hidden_fatigue_skillgrade}]]}} {{very_easy_crit=[[ceil((@{swim_total}+@{hidden_fatigue_skillgrade})*.1)]]}}  {{rolled=[[ 1d100 ]]}}">
                                <button type='roll' name="roll_swim_check_penalized" value="&{template:runequest} {{name=Swim}} {{very_easy=[[ @{swim_total}+?{Penalty|0}+@{hidden_fatigue_skillgrade} ]]}} {{very_easy_crit=[[ ceil( (@{swim_total}+?{Penalty|0}+@{hidden_fatigue_skillgrade})*.1 ) ]]}}  {{rolled=[[ 1d100 ]]}}">+?</td>
                        </tr>
                        <tr>
                            <td class="skill">Unarmed</td>
                            <td class="skill_calc">STR+DEX+<input type="text" class="value" name="attr_unarmed_points" value="0"/>+<input type="text" class="value" name="attr_unarmed_temp" value="0"/></td>
                            <td class="skill_symbol">=</td>
                            <td class="skill_total"><input type="number" class="total" name="attr_unarmed_total" value="(@{hidden_str}+@{hidden_dex}+@{unarmed_points}+@{unarmed_temp})" disabled="true"/></td>
                            <td class="skill_roll"><button type='roll' name="roll_unarmed_check" value="&{template:runequest} {{name=Unarmed}} {{very_easy=[[@{unarmed_total}+@{hidden_fatigue_skillgrade}]]}} {{very_easy_crit=[[ceil((@{unarmed_total}+@{hidden_fatigue_skillgrade})*.1)]]}}  {{rolled=[[ 1d100 ]]}}">
                                <button type='roll' name="roll_unarmed_check_penalized" value="&{template:runequest} {{name=Unarmed}} {{very_easy=[[ @{unarmed_total}+?{Penalty|0}+@{hidden_fatigue_skillgrade} ]]}} {{very_easy_crit=[[ ceil( (@{unarmed_total}+?{Penalty|0}+@{hidden_fatigue_skillgrade})*.1 ) ]]}}  {{rolled=[[ 1d100 ]]}}">+?</td>
                        </tr>
                    </table>
                </div>
            </div>
            <div class="column-2of2">
                <div class="section">
                    <h3>Advanced Skills</h3>
                    <table class="full_fixed">
                        <tr class="head">
                            <td class="profskill"><h5>Skill</h5></td>
                            <td class="profskill_calc_label"><h5>Base+Points+Augment</h5></td>
                            <td class="skill_symbol"><h5>=</h5></td>
                            <td class="skill_total"><h5>%</h5></td>
                            <td class="skill_roll"></td>
                        </tr>
                    </table>
                    <fieldset class="repeating_profskills">
                        <table class="full_fixed">
                            <tr>
                                <td class="profskill"><input type="text" class="full" name="attr_skillname"/></td>
                                <td class="profskill_calc"><input type="text" class="skill_base" name="attr_base" placeholder="@{char1}+@{char2}">+<input type="text" class="value" name="attr_points" value="0"/>+<input type="text" class="value" name="attr_temp" value="0"/></td>
                                <td class="skill_symbol">=</td>
                                <td class="skill_total"><input type="number" class="total" name="attr_total" value="(@{base}+@{points}+@{temp})" disabled="true"/></td>
                                <td class="skill_roll"><button type='roll' name="roll_check" value="&{template:runequest} {{name=@{skillname}}} {{very_easy=[[@{total}+@{hidden_fatigue_skillgrade}]]}} {{very_easy_crit=[[ceil((@{total}+@{hidden_fatigue_skillgrade})*.1)]]}}  {{rolled=[[ 1d100 ]]}}">
                                    <button type='roll' name="roll_check_penalized" value="&{template:runequest} {{name=@{skillname}}} {{very_easy=[[ @{total}+?{Penalty|0}+@{hidden_fatigue_skillgrade} ]]}} {{very_easy_crit=[[ ceil( (@{total}+?{Penalty|0}+@{hidden_fatigue_skillgrade})*.1 ) ]]}}  {{rolled=[[ 1d100 ]]}}">+?</td>
                            </tr>
                        </table>
                    </fieldset>
                    <table class="full_fixed">
                        <tr class="head">
                            <td class="profskill"><h5>Language</h5></td>
                            <td class="profskill_calc_label"><h5>Base+Points+Augment</h5></td>
                            <td class="skill_symbol"><h5>=</h5></td>
                            <td class="skill_total"><h5>%</h5></td>
                            <td class="skill_roll"></td>
                        </tr>
                    </table>
                    <table class="full_fixed">
                        <tr>
                            <td class="profskill"><input type="text" class="full" name="attr_language1_name" value="Native Tongue"/></td>
                            <td class="profskill_calc">INT+CHA+<input type="text" class="value" name="attr_language1_points" value="0"/>+<input type="text" class="value" name="attr_language1_temp" value="0"/></td>
                            <td class="skill_symbol">=</td>
                            <td class="skill_total"><input type="number" class="total" name="attr_language1_total" value="(@{hidden_int}+@{hidden_cha}+@{language1_points}+@{language1_temp})" disabled="true"/></td>
                            <td class="skill_roll"><button type='roll' name="roll_language1_check" value="&{template:runequest} {{name=@{language1_name}}} {{very_easy=[[@{language1_total}+@{hidden_fatigue_skillgrade}]]}} {{very_easy_crit=[[ceil((@{language1_total}+@{hidden_fatigue_skillgrade})*.1)]]}}  {{rolled=[[ 1d100 ]]}}">
                                <button type='roll' name="roll_language1_check_penalized" value="&{template:runequest} {{name=@{language1_name}}} {{very_easy=[[ @{language1_total}+?{Penalty|0}+@{hidden_fatigue_skillgrade} ]]}} {{very_easy_crit=[[ ceil( (@{language1_total}+?{Penalty|0}+@{hidden_fatigue_skillgrade})*.1 ) ]]}}  {{rolled=[[ 1d100 ]]}}">+?</td>
                        </tr>
                    </table>
                    <fieldset class="repeating_languages">
                        <table class="full_fixed">
                            <tr>
                                <td class="profskill"><input type="text" class="full" name="attr_languagename" value="Native Tongue"/></td>
                                <td class="profskill_calc">INT+CHA+<input type="text" class="value" name="attr_points" value="0"/>+<input type="text" class="value" name="attr_temp" value="0"/></td>
                                <td class="skill_symbol">=</td>
                                <td class="skill_total"><input type="number" class="total" name="attr_total" value="(@{hidden_int}+@{hidden_cha}+@{points}+@{temp})" disabled="true"/></td>
                                <td class="skill_roll"><button type='roll' name="roll_check" value="&{template:runequest} {{name=@{languagename}}} {{very_easy=[[@{total}+@{hidden_fatigue_skillgrade}]]}} {{very_easy_crit=[[ceil((@{total}+@{hidden_fatigue_skillgrade})*.1)]]}}  {{rolled=[[ 1d100 ]]}}">
                                    <button type='roll' name="roll_check_penalized" value="&{template:runequest} {{name=@{languagename}}} {{very_easy=[[ @{total}+?{Penalty|0}+@{hidden_fatigue_skillgrade} ]]}} {{very_easy_crit=[[ ceil( (@{total}+?{Penalty|0}+@{hidden_fatigue_skillgrade})*.1 ) ]]}}  {{rolled=[[ 1d100 ]]}}">+?</td>
                            </tr>
                        </table>
                    </fieldset>
                </div>
            </div>
        </div>

        <div class="page equipment-page">
            <div class="column-1of2">
                <div class="section">
                    <h3>Equipment</h3>
                    <table class="full">
                        <tr class="head">
                            <td class="item"><h5>Item</h5></td>
                            <td class="item_qnty"><h5>Qnty</h5></td>
                            <td class="item_enc"><h5>ENC per</h5></td>
                        </tr>
                    </table>
                    <fieldset class="repeating_items">
                        <table class="full_fixed">
                            <tr>
                                <td class="item"><input type="text" class="full" name="attr_item"/></td>
                                <td class="item_qnty"><input type="text" class="value_full" name="attr_item_qnty" value="0"/></td>
                                <td class="item_enc"><input type="text" class="value_full" name="attr_item_enc" value="0"/></td>
                            </tr>
                        </table>
                    </fieldset>
                </div>
            </div>

            <div class="column-2of2">
                <div class="section">
                    <h3>Money & Wealth</h3>
                    <textarea class="wealth" name="attr_wealth"></textarea>
                    <input type="hidden" name="attr_hidden_living_standard_cost" value="10%" />
                    <table class="full">
                        <tr>
                            <td class="attribute-label">Standard of Living: </td>
                            <td class="attribute_value">
                                <select class="full" name="attr_living_standard_name">
                                    <option value="Subsistence" selected>Subsistence</option>
                                    <option value="Within Means">Within Means</option>
                                    <option value="Comfortable">Comfortable</option>
                                    <option value="Luxurious">Luxurious</option>
                                    <option value="Ostentatious">Ostentatious</option>
                                </select>
                            </td>
                            <td class="attribute_value">
                            <td><input class="full" type="text" name="attr_living_standard_cost" value="@{hidden_living_standard_cost}" disabled/></td>
                            </td>
                        </tr>
                    </table>
                </div>
                <span style="display: block; margin-bottom: 2%;"></span>
                <div class="section">
                    <input type="hidden" name="attr_total_weapon_enc" value="0" />
                    <input type="hidden" name="attr_total_item_enc" value="0" />
                    <input type="hidden" name="attr_total_armor_enc" value="0" />
                    <input type="hidden" name="attr_hidden_enc_total" value="0" />
                    <input type="hidden" name="attr_hidden_enc_overloaded" value="0" />

                    <input type="hidden" name="attr_hidden_enc_skill_mod" value="0" />
                    <input type="hidden" name="attr_hidden_enc_fatigue_mod" value="0" />
                    <input type="hidden" name="attr_hidden_enc_move_rate_mod" value="0" />
                    <input type="hidden" name="attr_hidden_enc_skill_mod1" value="Standard" />
                    <input type="hidden" name="attr_hidden_enc_fatigue_mod1" value="Standard" />
                    <input type="hidden" name="attr_hidden_enc_move_rate_mod1" value="Standard" />
                    <table class="full">
                        <tr>
                            <td style="white-space: nowrap"><h3>Load</h3></td>
                        </tr>
                    </table>
                    <table class="full">
                        <tr class="head">
                            <td class="load_label"><h5>Current</h5></td>
                            <td class="load_label"><h5>Overloaded</h5></td>
                        </tr>
                        <tr>
                            <td class="load_value"><input type="number" class="value_full" name="attr_enc_total" value="@{hidden_enc_total}" disabled/></td>
                            <td class="load_value"><input type="number" class="value_full" name="attr_enc_overloaded" value="@{hidden_enc_overloaded}" disabled/></td>
                        </tr>
                    </table>
                    <table class="full">
                        <tr>
                            <td><h5>Str & Dex Skills:</h5></td>
                            <td><input class="full" type="text" name="attr_enc_skill_mod" value="@{hidden_enc_skill_mod1}" disabled/></td>
                        </tr>
                        <tr>
                            <td><h5>Fatigue Tests:</h5></td>
                            <td><input class="full" type="text" name="attr_enc_fatigue_mod" value="@{hidden_enc_fatigue_mod1}" disabled/></td>
                        </tr>
                        <tr>
                            <td><h5>Movement Rate:</h5></td>
                            <td><input class="full" type="text" name="attr_move_rate_mod" value="@{hidden_enc_move_rate_mod1}" disabled/></td>
                        </tr>

                    </table>
                    <p style="margin:0px;font-size:75%">Overloaded maluses must be applied to skills/fatigue tests manually
                </div>
            </div>
        </div>

        <div class="page notes-page">
            <div class="column-1of1">
                <div class="section">
                    <h3>Cults, Orders & Brotherhoods</h3>
                    <table class="full_fixed">
                        <tr class="head">
                            <td class="cult"><h5>Cult/Order/Brotherhood</h5></td>
                            <td class="cult_rank"><h5>Rank</h5></td>
                            <td class="cult_notes"><h5>Gifts/Notes</h5></td>
                        </tr>
                    </table>
                    <fieldset class="repeating_cults">
                        <table class="full_fixed">
                            <tr class="head">
                                <td class="cult"><input class="full" type="text" name="attr_name"/></th>
                                <td class="cult_rank">
                                    <select class="full" name="attr_devotionspirit_limit">
                                        <option disabled="true">--Divine Cult--</option>
                                        <option value="0">Lay Member</option>
                                        <option value="ceil(@{hidden_pow}*.25)">Initiate</option>
                                        <option value="ceil(@{hidden_pow}*.5)">Acolyte</option>
                                        <option value="ceil(@{hidden_pow}*.75)">Priest</option>
                                        <option value="@{hidden_pow}">High Priest</option>
                                        <option disabled="true">--Sorcery Order--</option>
                                        <option value="0">Novice</option>
                                        <option value="0">Apprentice</option>
                                        <option value="0">Adept</option>
                                        <option value="0">Mage</option>
                                        <option value="0">Archmage</option>
                                        <option disabled="true">--Guild--</option>
                                        <option value="0">Novice</option>
                                        <option value="0">Apprentice</option>
                                        <option value="0">Journeyman</option>
                                        <option value="0">Master</option>
                                        <option value="0">Grand Master</option>
                                        <option disabled="true">--Martial Order (chivalric)--</option>
                                        <option value="0">Man-at-Arms</option>
                                        <option value="0">Squire</option>
                                        <option value="0">Knight</option>
                                        <option value="0">Knight Captain</option>
                                        <option value="0">Grand Master</option>
                                        <option disabled="true">--Martial Order (monastic)--</option>
                                        <option value="0">Novice</option>
                                        <option value="0">Initiate</option>
                                        <option value="0">Brother</option>
                                        <option value="0">Elder Brother</option>
                                        <option value="0">Abbot</option>
                                    </select>
                                </td>
                                <td class="cult_notes"><input class="full" type="text" name="attr_notes"/></td>
                            </tr>
                        </table>
                    </fieldset>
                </div>
            </div>

            <div class="column-1of1">
                <div class="section">
                    <h3>Active Effects</h3>
                    <table class="full_fixed">
                        <tr class="head">
                            <td class="effect_label"><h5>Effect</h5></td>
                            <td class="effect_duration"><h5>Duration</h5></td>
                            <td class="effect_magnitude"><h5>Magnitude</h5></td>
                            <td class="effect_intensity"><h5>Intensity</h5></td>
                            <td class="effect_range"><h5>Range</h5></td>
                            <td class="effect_targets"><h5>Targets</h5></td>
                            <td class="effect_desc"><h5>Description</h5></td>
                            <td class="effect_mp_cost"><h5>MP Cost</h5></td>
                        </tr>
                    </table>
                    <fieldset class="repeating_activeeffects">
                        <table class="full_fixed">
                            <tr>
                                <td class="effect_label"><input class="full" type="text" name="attr_effect"/></td>
                                <td class="effect_duration"><input class="value_full" type="text" name="attr_duration"/></td>
                                <td class="effect_magnitude"><input class="value_full" type="text" name="attr_magnitude"/></td>
                                <td class="effect_intensity"><input class="value_full" type="text" name="attr_intensity"/></td>
                                <td class="effect_range"><input class="value_full" type="text" name="attr_range"/></td>
                                <td class="effect_targets"><input class="value_full" type="text" name="attr_targets"/></td>
                                <td class="effect_desc"><input class="full" type="text" name="attr_description"/></td>
                                <td class="effect_mp_cost"><input class="value_full" type="text" name="attr_mp_cost"/></td>
                            </tr>
                        </table>
                    </fieldset>
                </div>
            </div>

            <div class="section">
                <h3>Notes</h3>
                <div class="column-1of3">
                    <h4>Community & Family</h4>
                    <textarea class="notes" name="attr_notes_communityfamily"></textarea>
                </div>
                <div class="column-1of3">
                    <h4>Allies & Enemies</h4>
                    <textarea class="notes" name="attr_notes_alliesenemies"></textarea>
                </div>
                <div class="column-1of3">
                    <h4>Character & Other</h4>
                    <textarea class="notes" name="attr_notes_characterother"></textarea>
                </div>
                <br style="clear:both;"/>
            </div>

            <div class="column-1of1">
                <div class="section">
                    <h3>Heroic Abilities</h3>
                    <textarea class="notes2" name="attr_heroic_abilities"></textarea>
                </div>
            </div>
        </div>

        <div class="page common_magic-page">
            <div class="section">
                <h3>Common Magic</h3>
                <table>
                    <tr class="head">
                        <td><h5>Base+Points+Augment</h5></td>
                        <td><h5>=</h5></td>
                        <td><h5>%</h5></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>POW+CHA+<input type="text" class="value" name="attr_common_magic_points" value="0"/>+<input type="text" class="value" name="attr_common_magic_temp" value="0"/></td>
                        <td>=</td>
                        <td><input type="number" class="total" name="attr_common_magic_total" value="(@{hidden_pow}+@{hidden_cha}+@{common_magic_points}+@{common_magic_temp})" disabled="true"/></td>
                        <td><button type='roll' name="roll_common_magic_check" value="&{template:runequest} {{name=Common Magic}} {{very_easy=[[@{common_magic_total}+@{hidden_fatigue_skillgrade}]]}} {{very_easy_crit=[[ceil((@{common_magic_total}+@{hidden_fatigue_skillgrade})*.1)]]}}  {{rolled=[[ 1d100 ]]}}">
                            <button type='roll' name="roll_common_magic_check_penalized" value="&{template:runequest} {{name=Common Magic}} {{very_easy=[[ @{common_magic_total}+?{Penalty|0}+@{hidden_fatigue_skillgrade} ]]}} {{very_easy_crit=[[ ceil( (@{common_magic_total}+?{Penalty|0}+@{hidden_fatigue_skillgrade})*.1 ) ]]}}  {{rolled=[[ 1d100 ]]}}">+?</td>
                    </tr>
                </table>
                <h4>Spells Known</h4>
                <textarea class="common_magic_spells" name="attr_common_magic_spells"></textarea>
            </div>
        </div>
        <div class="page sorcery-page">
            <div class="section">
                <h3>Sorcery</h3>
                <table>
                    <tr class="head">
                        <td></td>
                        <td><h5>Base+Points+Augment</h5></td>
                        <td><h5>=</h5></td>
                        <td><h5>%</h5></td>

                        <td><h4>Shaping Points</h4></td>
                        <td><h4>Max Spells</h4></td>
                    </tr>
                    <tr>
                        <td><h4>Manipulation&nbsp;</h4></td>
                        <td>INT+POW+<input type="text" class="value" name="attr_shaping_points" value="0"/>+<input type="text" class="value" name="attr_shaping_temp" value="0"/></td>
                        <td>=</td>
                        <td><input type="number" class="total" name="attr_shaping_total" value="(@{hidden_int}+@{hidden_pow}+@{shaping_points}+@{shaping_temp})" disabled="true"/></td>
                        <td><input type="number" class="value_full" name="attr_shaping_effect_points" value="ceil(@{shaping_total}/10)" disabled="true"/></td>
                        <td><input type="number" class="value_full" name="attr_memorized_sorcery_spells_max" value="@{hidden_int}" disabled="true"/></td>
                    </tr>
                </table>
                <span style="display:block;margin-bottom: 1%;"></span>
                <table class="full_fixed">
                    <tr class="head">
                        <td class="sorcery_label"><h4>School/Grimoire</h4></td>
                        <td class="sorcery_calc_label"><h5>Base+Points+Augment</h5></td>
                        <td class="sorcery_symbol"><h5>=</h5></td>
                        <td class="sorcery_total"><h5>%</h5></td>
                        <td class="sorcery_roll"></td>
                        <td class="sorcery_intensity"><h5>Intensity</h5></td>
                        <td class="sorcery_spells"><h5>Spells</h5></td>
                    </tr>
                </table>
                <fieldset class="repeating_invocation">
                    <table class="full_fixed">
                        <tr class="head">
                            <td class="sorcery_label"><input type="text" class="full" name="attr_invocation_name" /></td>
                            <td class="sorcery_calc">INTx2+<input type="text" class="value" name="attr_invocation_points" value="0"/>+<input type="text" class="value" name="attr_invocation_temp" value="0"/></td>
                            <td class="sorcery_symbol">=</td>
                            <td class="sorcery_total"><input type="number" class="total" name="attr_invocation_total" value="(@{hidden_int}+@{hidden_int}+@{invocation_points}+@{invocation_temp})" disabled="true"/></td>
                            <td class="sorcery_roll"><button type='roll' name="roll_invocation_check" value="&{template:runequest} {{name=@{invocation_name}}} {{very_easy=[[@{invocation_total}+@{hidden_fatigue_skillgrade}]]}} {{very_easy_crit=[[ceil((@{invocation_total}+@{hidden_fatigue_skillgrade})*.1)]]}}  {{rolled=[[ 1d100 ]]}}">
                                <button type='roll' name="roll_invocation_check_penalized" value="&{template:runequest} {{name=@{invocation_name}}} {{very_easy=[[ @{invocation_total}+?{Penalty|0}+@{hidden_fatigue_skillgrade} ]]}} {{very_easy_crit=[[ ceil( (@{invocation_total}+?{Penalty|0}+@{hidden_fatigue_skillgrade})*.1 ) ]]}}  {{rolled=[[ 1d100 ]]}}">+?</td>
                            <td class="sorcery_intensity"><input type="number" class="value_full" name="attr_intensity_max" value="ceil(@{invocation_total}/10)" disabled="true"/></td>
                            <td class="sorcery_spells"><input type="text" class="full" name="attr_spells" /></td>
                        </tr>
                    </table>
                </fieldset>
                <span style="display:block;margin-bottom: 1%;"></span>
                <h4>Memorized Spells</h4>
                <textarea class="sorcery_memorized_spells" name="attr_memorized_sorcery_spells"></textarea>
            </div>
        </div>

        <div class="page divine_magic-page">
            <div class="section">
                <h3>Divine Magic</h3>
                <input type="hidden" class="full" name="attr_magic_points_dev" value=0/>
                <span style="display:block;margin-bottom: 1%;"></span>
                <table class="full_fixed">
                    <tr class="head">
                        <td class="divine_magic_label"><h4>Devotion</h4></td>
                        <td class="divine_magic_calc_label"><h5>Base+Points+Augment</h5></td>
                        <td class="divine_magic_symbol"><h5>=</h5></td>
                        <td class="divine_magic_total"><h5>%</h5></td>
                        <td class="divine_magic_roll"></td>
                        <td class="divine_magic_intensity"><h5>Intensity</h5></td>
                        <td class="divine_magic_magnitude"><h5>Magnitude</h5></td>
                        <td class="divine_magic_pool" colspan="3"><h5>Devotional Pool</h5></td>
                    </tr>
                </table>
                <fieldset class="repeating_devotion">
                    <table class="full_fixed">
                        <tr class="head">
                            <td class="divine_magic_label"><input type="text" class="full" name="attr_devotion_name" /></td>
                            <td class="divine_magic_calc">CHA+Devoted POW+<input type="text" class="value" name="attr_devotion_points" value="0"/>+<input type="text" class="value" name="attr_devotion_temp" value="0"/></td>
                            <td class="divine_magic_symbol">=</td>
                            <td class="divine_magic_total"><input type="number" class="total" name="attr_devotion_total" value="(@{devotional_poolmax}+@{hidden_cha}+@{devotion_points}+@{devotion_temp})" disabled="true"/></td>
                            <td class="divine_magic_roll"><button type='roll' name="roll_devotion_check" value="&{template:runequest} {{name=@{devotion_name}}} {{very_easy=[[@{devotion_total}+@{hidden_fatigue_skillgrade}]]}} {{very_easy_crit=[[ceil((@{devotion_total}+@{hidden_fatigue_skillgrade})*.1)]]}}  {{rolled=[[ 1d100 ]]}}">
                                <button type='roll' name="roll_devotion_check_penalized" value="&{template:runequest} {{name=@{devotion_name}}} {{very_easy=[[ @{devotion_total}+?{Penalty|0}+@{hidden_fatigue_skillgrade} ]]}} {{very_easy_crit=[[ ceil( (@{devotion_total}+?{Penalty|0}+@{hidden_fatigue_skillgrade})*.1 ) ]]}}  {{rolled=[[ 1d100 ]]}}">+?</td>
                            <td class="divine_magic_intensity"><input type="number" class="value_full" name="attr_intensity" value="ceil(@{devotion_total}/10)" disabled="true"/></td>
                            <td class="divine_magic_magnitude"><input type="number" class="value_full" name="attr_magnitude" value="ceil(@{devotion_total}/10)" disabled="true"/></td>
                            <td class="divine_magic_pool_value"><input type="text" class="value_full" name="attr_devotional_pool" /></td>
                            <td class="divine_magic_pool_symbol">/</td>
                            <td class="divine_magic_pool_value"><input type="text" class="value_full" name="attr_devotional_poolmax" value="0"/></td>
                        </tr>
                    </table>
                </fieldset>
                <span style="display:block;margin-bottom: 1%;"></span>
                <h4>Known Miracles</h4>
                <textarea class="divine_magic_miracles" name="attr_miracles"></textarea>
            </div>
        </div>

    </div>
</div>


<rolltemplate class="sheet-rolltemplate-runequest-old">
    <table>
        <caption>{{name}}</caption>
        {{#allprops()}}
        <tr><td class="template_label">{{key}}:</td><td class="template_value">{{value}}</td></tr>
        {{/allprops()}}
    </table>
</rolltemplate>

<!--
/roll 1d100
/roll 1d100
-->

<rolltemplate class="sheet-rolltemplate-runequest">
    <table>
        <caption>{{name}}</caption>
        <tr style="background:#DFF0D8;">
            <td class="template_label">Roll:</td>
            <td class="template_value">{{rolled}}&le;{{very_easy}}</td>
            <!-- Auto Succeed -->
            {{#rollLess() rolled 6}}
            {{#rollBetween() rolled 1 very_easy_crit}}
            <td>&#10004;</td>
            {{/rollBetween() rolled 1 very_easy_crit}}
            {{#rollGreater() rolled very_easy_crit}}
            <td>&#10003;</td>
            {{/rollGreater() rolled very_easy_crit}}
            {{/rollLess() rolled 6}}
            <!-- Not Fumble -->
            {{#rollBetween() rolled 6 95}}
            {{#rollBetween() rolled 1 very_easy_crit}}
            <td>&#10004;</td>
            {{/rollBetween() rolled 1 very_easy_crit}}
            {{#rollGreater() rolled very_easy_crit}}
            {{#rollBetween() rolled very_easy_crit very_easy}}
            <td>&#10003;</td>
            {{/rollBetween() rolled very_easy_crit very_easy}}
            {{#rollGreater() rolled very_easy}}
            <td>&#10005;</td>
            {{/rollGreater() rolled very_easy}}
            {{/rollGreater() rolled very_easy_crit}}
            {{/rollBetween() rolled 6 95}}
            <!-- Auto Fail -->
            {{#rollGreater() rolled 95}}
            {{#rollGreater() very_easy 100}}
            {{#rollLess() rolled 100}}
            <td>&#10005;</td>
            {{/rollLess() rolled 100}}
            {{#rollTotal() rolled 100}}
            <td>&#10006;</td>
            {{/rollTotal() rolled 100}}
            {{/rollGreater() very_easy 100}}
            {{#rollLess() very_easy 101}}
            {{#rollLess() rolled 99}}
            <td>&#10005;</td>
            {{/rollLess() rolled 99}}
            {{#rollGreater() rolled 98}}
            <td>&#10006;</td>
            {{/rollGreater() rolled 98}}
            {{/rollLess() very_easy 101}}
            {{/rollGreater() rolled 95}}
        </tr>
    </table>
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-runequest-init">
    <table>
        <caption>{{name}}</caption>
        <tr style="background:#DFF0D8;">
            <td class="template_label">Roll:</td>
            <td class="template_value">{{rolled}}</td>
        </tr>
    </table>
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-runequest-weapon">
    <table>
        <caption>{{name}}</caption>
        <tr style="background:#DFF0D8;"><td class="template_label">Damage:</td><td class="template_value">{{damage}}</td></tr>
        {{#size/reach}}
        <tr style="background:#DFF0D8;"><td class="template_label">Size/Reach:</td><td class="template_value">{{size/reach}}</td></tr>
        {{/size/reach}}
        {{#manoeuvres}}
        <tr style="background:#DFF0D8;"><td class="template_label">Manoeuvres:</td>:</td><td class="template_value">{{manoeuvres}}</td></tr>
        {{/manoeuvres}}
    </table>
</rolltemplate>

<script type="text/worker">

    /* ===== PARAMETERS ==========
    destinations = the name of the attribute that stores the total quantity
            can be a single attribute, or an array: ['total_cost', 'total_weight']
            If more than one, the matching fields must be in the same order.
        section = name of repeating fieldset, without the repeating_
        fields = the name of the attribute field to be summed
              destination and fields both can be a single attribute: 'weight'
              or an array of attributes: ['weight','number','equipped']
    */
    const repeatingSum = (destinations, section, fields) => {
        if (!Array.isArray(destinations)) destinations = [destinations.replace(/\s/g, '').split(',')];
        if (!Array.isArray(fields)) fields = [fields.replace(/\s/g, '').split(',')];
        getSectionIDs(`repeating_${section}`, idArray => {
            const attrArray = idArray.reduce((m, id) => [...m, ...(fields.map(field => `repeating_${section}_${id}_${field}`))], []);
            getAttrs([...attrArray], v => {
                const getValue = (section, id, field) => v[`repeating_${section}_${id}_${field}`] === 'on' ? 1 : parseFloat(v[`repeating_${section}_${id}_${field}`]) || 0;
                const commonMultipliers = (fields.length <= destinations.length) ? [] : fields.splice(destinations.length, fields.length - destinations.length);
                const output = {};
                destinations.forEach((destination, index) => {
                    output[destination] = idArray.reduce((total, id) => total + getValue(section, id, fields[index]) * commonMultipliers.reduce((subtotal, mult) => subtotal * getValue(section, id, mult), 1), 0);
                });
                setAttrs(output);
            });
        });
    };


    on('sheet:opened change:str_std change:str_temp', function() {
        getAttrs(["str_std", "str_temp"], function(values) {
            let std = parseInt(values.str_std)||0;
            let temp = parseInt(values.str_temp)||0;
            let tot = std+temp;
            setAttrs({
                "hidden_str": tot
            });
        });
    });

    on('sheet:opened change:int_std change:int_temp', function() {
        getAttrs(["int_std", "int_temp"], function(values) {
            let std = parseInt(values.int_std)||0;
            let temp = parseInt(values.int_temp)||0;
            let tot = std+temp;
            setAttrs({
                "hidden_int": tot
            });
        });
    });

    on('sheet:opened change:con_std change:con_temp', function() {
        getAttrs(["con_std", "con_temp"], function(values) {
            let std = parseInt(values.con_std)||0;
            let temp = parseInt(values.con_temp)||0;
            let tot = std+temp;
            setAttrs({
                "hidden_con": tot
            });
        });
    });

    on('sheet:opened change:pow_std change:pow_temp', function() {
        getAttrs(["pow_std", "pow_temp"], function(values) {
            let std = parseInt(values.pow_std)||0;
            let temp = parseInt(values.pow_temp)||0;
            let tot = std+temp;
            setAttrs({
                "hidden_pow": tot
            });
        });
    });

    on('sheet:opened change:siz_std change:siz_temp', function() {
        getAttrs(["siz_std", "siz_temp"], function(values) {
            let std = parseInt(values.siz_std)||0;
            let temp = parseInt(values.siz_temp)||0;
            let tot = std+temp;
            setAttrs({
                "hidden_siz": tot
            });
        });
    });

    on('sheet:opened change:cha_std change:cha_temp', function() {
        getAttrs(["cha_std", "cha_temp"], function(values) {
            let std = parseInt(values.cha_std)||0;
            let temp = parseInt(values.cha_temp)||0;
            let tot = std+temp;
            setAttrs({
                "hidden_cha": tot
            });
        });
    });

    on('sheet:opened change:dex_std change:dex_temp', function() {
        getAttrs(["dex_std", "dex_temp"], function(values) {
            let std = parseInt(values.dex_std)||0;
            let temp = parseInt(values.dex_temp)||0;
            let tot = std+temp;
            setAttrs({
                "hidden_dex": tot
            });
        });
    });

    on('sheet:opened change:hidden_str change:hidden_siz', function() {
        getAttrs(["hidden_str", "hidden_siz"], function(values) {
            let str = parseInt(values.hidden_str)||0;
            let siz = parseInt(values.hidden_siz)||0;
            let tot = str+siz+1;
            setAttrs({
                "hidden_enc_overloaded": tot
            });
        });
    });

    on('sheet:opened change:repeating_weapons remove:repeating_weapons', function() {
	    repeatingSum("total_weapon_enc","weapons","weapon_enc");
    });

    on('sheet:opened change:repeating_items remove:repeating_items', function() {
	    repeatingSum("total_item_enc","items",["item_enc","item_qnty"]);
    });

    on('sheet:opened change:repeating_devotion remove:repeating_devotion', function() {
	    repeatingSum("magic_points_dev","devotion","devotional_poolmax");
    });

    on('sheet:opened change:hitloc1_enc change:hitloc2_enc change:hitloc3_enc change:hitloc4_enc change:hitloc5_enc change:hitloc6_enc change:hitloc7_enc', function() {
	    getAttrs(["hitloc1_enc", "hitloc2_enc", "hitloc3_enc", "hitloc4_enc", "hitloc5_enc", "hitloc6_enc", "hitloc7_enc"], function(values) {
            let loc1 = parseInt(values.hitloc1_enc)||0;
            let loc2 = parseInt(values.hitloc2_enc)||0;
            let loc3 = parseInt(values.hitloc3_enc)||0;
            let loc4 = parseInt(values.hitloc4_enc)||0;
            let loc5 = parseInt(values.hitloc5_enc)||0;
            let loc6 = parseInt(values.hitloc6_enc)||0;
            let loc7 = parseInt(values.hitloc7_enc)||0;
            let tot = loc1+loc2+loc3+loc4+loc5+loc6+loc7;
            setAttrs({
                "total_armor_enc": tot
            });
	    });
    });

    on('sheet:opened change:total_weapon_enc change:total_item_enc change:total_armor_enc', function() {
        getAttrs(["total_weapon_enc", "total_item_enc", "total_armor_enc"], function(values) {
            let weapon = parseInt(values.total_weapon_enc)||0;
            let item = parseInt(values.total_item_enc)||0;
            let armor = parseInt(values.total_armor_enc)||0;
            let tot = weapon+item+armor;
            setAttrs({
                "hidden_enc_total": tot
            });
        });
    });

    on('sheet:opened change:hidden_enc_total change:hidden_enc_overloaded', function() {
	    getAttrs(["hidden_enc_total", "hidden_enc_overloaded"], function(values) {
            let total = parseInt(values.hidden_enc_total)||0;
            let overloaded = parseInt(values.hidden_enc_overloaded)||0;
            if (total >= overloaded) {
                setAttrs({
                    "hidden_enc_skill_mod": "-20",
                    "hidden_enc_fatigue_mod": "-20",
                    "hidden_enc_move_rate_mod": "*.5",
                    "hidden_enc_skill_mod1": "-20%",
                    "hidden_enc_fatigue_mod1": "-20%",
                    "hidden_enc_move_rate_mod1": "Halved"
                });
            }
            else {
                setAttrs({
                    "hidden_enc_skill_mod": "-0",
                    "hidden_enc_fatigue_mod": "-0",
                    "hidden_enc_move_rate_mod": "-0",
                    "hidden_enc_skill_mod1": "Standard",
                    "hidden_enc_fatigue_mod1": "Standard",
                    "hidden_enc_move_rate_mod1": "Standard"
                });
            }
        });
    });
    on("sheet_opened change:living_standard_name", function() {
        getAttrs(["living_standard_name"], function(values) {
            let name = values.living_standard_name;
            let cost = "0";
            switch(name) {
                case "Subsistence":
                    cost = "10%";
                    break;
                case "Within Means":
                    cost = "25%";
                    break;
                case "Comfortable":
                    cost = "50%";
                    break;
                case "Luxurious":
                    cost = "80%";
                    break;
                case "Ostentatious":
                    cost = "100% or more";
                    break;
            }

            setAttrs({
                "hidden_living_standard_cost": cost
            });

        });
    });

    on("sheet_opened change:fatigue", function() {
        getAttrs(["fatigue"], function(values) {
            let fatigue = values.fatigue;
            let skillgrade = "0";
            let movement = "0";
            let strike_rank = "0";
            let action_points = "0";
            let skillgrade1 = "0";
            let movement1 = "0";
            let strike_rank1 = "0";
            let action_points1 = "0";
            switch(fatigue) {
                case "Fresh":
                    skillgrade = "-0";
                    movement = "+0";
                    strike_rank = "0";
                    action_points = "0";
                    skillgrade1 = "Standard";
                    movement1 = "No Penalties";
                    strike_rank1 = "No Penalties";
                    action_points1 = "No Penalties";
                    break;
                case "Winded":
                    skillgrade = "-10";
                    movement = "+0";
                    strike_rank = "0";
                    action_points = "0";
                    skillgrade1 = "-10%";
                    movement1 = "No Penalties";
                    strike_rank1 = "No Penalties";
                    action_points1 = "No Penalties";
                    break;
                case "Tired":
                    skillgrade = "-20";
                    movement = "-1";
                    strike_rank = "0";
                    action_points = "0";
                    skillgrade1 = "-20%";
                    movement1 = "-1 metres";
                    strike_rank1 = "No Penalties";
                    action_points1 = "No Penalties";
                    break;
                case "Wearied":
                    skillgrade = "-30";
                    movement = "-1";
                    strike_rank = "-2";
                    action_points = "0";
                    skillgrade1 = "-30%";
                    movement1 = "-1 metres";
                    strike_rank1 = "-2";
                    action_points1 = "No Penalties";
                    break;
                case "Exhausted":
                    skillgrade = "-40";
                    movement = "*.5";
                    strike_rank = "-4";
                    action_points = "-5";
                    skillgrade1 = "-40%";
                    movement1 = "Halved";
                    strike_rank1 = "-4";
                    action_points1 = "-5 Combat Art DEX";
                    break;
                case "Debilitated":
                    skillgrade = "-50";
                    movement = "*.5";
                    strike_rank = "-6";
                    action_points = "-10";
                    skillgrade1 = "-50%";
                    movement1 = "Halved";
                    strike_rank1 = "-6";
                    action_points1 = "-10 Combat Art DEX";
                    break;
            }

            setAttrs({
                "hidden_fatigue_skillgrade": skillgrade,
                "hidden_fatigue_movement": movement,
                "hidden_fatigue_strike_rank": strike_rank,
                "hidden_fatigue_action_points": action_points,
                "hidden_fatigue_skillgrade1": skillgrade1,
                "hidden_fatigue_movement1": movement1,
                "hidden_fatigue_strike_rank1": strike_rank1,
                "hidden_fatigue_action_points1": action_points1
            });

        });
    });
</script>